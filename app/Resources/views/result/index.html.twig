{% extends 'base.html.twig' %}

{% block headline %}
    Emaitzen kudeaketa
{% endblock headline %}

{% block subheadline %}
    <div class="page-header">
        <ul class="list-inline">
            <li>
                <a class="btn btn-primary" href="{{ path('admin_result_new') }}"><i class="fa fa-plus-square" aria-hidden="true"></i> Berria</a>
            </li>
        </ul>
    </div>
{% endblock subheadline %}


{% block content %}

    <div class="col-sm-12">
        <table class="table table-condensed table-hover table-striped">
            <thead>
            <tr>
                <th>Id</th>
                <th>Izena (eus)</th>
                <th>Izena (cas)</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            {% for result in results %}
                <tr>
                    <td><a href="{{ path('admin_result_edit', { 'id': result.id }) }}">{{ result.id }}</a></td>
                    <td>{{ result.name }}</td>
                    <td>{{ result.namees }}</td>
                    <td>
                        <ul class="list-inline">
                            <li>
                                <a href="{{ path('admin_result_edit', { 'id': result.id }) }}"><i class="fa fa-pencil" aria-hidden="true"></i> Aldatu</a>
                            </li>
                            <li>
                                {{ form_start(deleteforms[result.id],{'attr': {'id': 'deleteResultForm' ~ result.id}}) }}
                                <a class="btnDelete" data-miid="{{ result.id }}" href="#"><i class="fa fa-trash text-danger"></i></a>
                                {{ form_end(deleteforms[result.id]) }}
                            </li>
                        </ul>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock %}
{% block foot_script %}
    {{ parent() }}
    <script>
        $(document).ready(function () {
            $('.btnDelete').on('click', function () {
                var r = confirm("{{ 'messages.ziurzaude'|trans }}");
                if ( r === true ) {
                    var miid = $(this).data("miid");
                    var frm = "#deleteResultForm" + miid;
                    $(frm).submit();
                }
            })
        })
    </script>

{% endblock %}